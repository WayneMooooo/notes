本课题采用仿真实验研究方法，结合理论分析和仿真验证，以检测多机器人协同覆盖路径规划算法的有效性。
# 算法初步方案
## 多机器人全覆盖路径规划
根据第 3 章对多机器人全覆盖问题的描述可知，多机器人全覆盖问题可分解为目标区域的分解和子区域路径规划两个问题，以下将从这两个方面来介绍本课题所使用的算法方案。
### 目标区域分解
本研究将使用DARP算法作为区域分解算法展开研究。
图时DARP方法的整体流程图。
![](https://raw.githubusercontent.com/WayneMooooo/notes/main/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/draft.md/425114910249181.png =364x)
每个机器人都对应一个评估矩阵$E_i$。初始状态下，每个机器人都有一个初始的评估矩阵。初始评估矩阵代表机器人距离每个单元格的距离，机器人$i$初始评估矩阵构造如下：
$$E_{i \mid x, y}=d\left(\chi_{i}\left(t_{0}\right),[x, y]^{\tau}\right), \forall i \in 1, \cdots, n_{r}$$
其中，$E_{i \mid x, y}$表示第$i$个机器人与位置为$(x,y)$ 的单元格间的距离，$d(\cdot)$表示距离函数。评估矩阵的初始化将会产生$n_r$个评估矩阵，每个机器人对应一个属于自己的评估矩阵来衡量其到每个单元格的可达性水平。下图为评估矩阵的示例。
![评估矩阵示例](https://raw.githubusercontent.com/WayneMooooo/notes/main/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/draft.md/560780711237048.png =419x)
整个区域的划分是由分配矩阵A来表示的，其构造如下：
$$A_{x,y}=\underset{i\in\{1,\cdots,n_r\}}{\operatorname{argmin}}~E_{i|x,y},~\forall (x,y)\in\mathcal{L}$$
其中，$A_{x,y}$表示单元格$(x,y)$对应的负责机器人。根据分配矩阵，便可直接计算每个机器人的子区域$L_i$，表示如下：
$$L_i=\{(x,y)\in\mathcal{L}:A(x,y)=i\},~\forall i\in\{1,\cdots,n_r\}~~~~~k_i=|L_i|$$
在区域划分的同时，还需要考虑各子区域的均衡性与连通性。通过对评估矩阵$E_i$进行优化，来更新分配矩阵，进而调整分配策略。
每个评估矩阵可以通过变量$m_i$来进行均衡性方面的矫正：
$$E_i=m_iE_i$$
其中$m_i$为第i个机器人评估矩阵的平衡性校正因子，每次迭代的更新公式为：
$$m_{i}=m_{i}+\alpha\left(\left|L_{i}\right|-p_{i}\right), \sum_{i=1}^{n_{r}} p_{i}=1$$
其中α是一个正的可调参数，pi是第i个机器人的子区域比例.如果每个机器人具有相同的覆盖能力，那么：
$$p_i=\cdots=p_{n_r}=p$$
其中$p=|L|/n_r$表示整个目标区域的单元格均分给每个机器人的数量。从形式上看，$m_i$的纠正作用可以描述为：当第i个机器人的负责区域小于均衡份额p时，$m_i$会减小，从而导致$E_i$中的单元具有更小的路径代价，最终导致在构造分配矩阵A的过程中，更多的单元格被分配给第i个智能体。
此外，为了确保各子区域的连通性，对于每个占据多个不同区域的i个机器人，引入如下矩阵作为连通性校正因子：
$$\mathcal{C}_{i \mid x, y}=\min (\|[x, y]-r\|)-\min (\|[x, y]-q\|), \forall r \in \mathcal{R}_{i}, q \in \mathcal{Q}_{i}$$
其中$\mathcal{R}_{i}$表示包含第i个机器人初始位置$\chi_{i}(t_{0})$的单元格的连通集，$\mathcal{Q}_{i}$表示分配给第i个机器人但与Ri集不具有空间连通性的所有其他连通集的并集。$\mathcal{C}_i$的构造方式是，对第i个机器人位置子集周围的区域进行奖励，对其他不相连的子集周围的区域进行惩罚，由此逐步构建一个封闭的形状区域。如果分配给第$i$个机器人的所有单元格都属于同一个闭合形状区域，则$\mathcal{C}_i$设置为全1矩阵。 
最后，为了保证分配矩阵A的连通性和平衡性，评估矩阵$E_i$的迭代方程为： 
$$E_{i}=\mathcal{C}_{i} \odot\left(m_{i} E_{i}\right)$$
综上所述，DARP算法使用记录从单元格到每个机器人位置的评估矩阵作为度量，通过迭代修正因子的过程不断修正区域分配的结果， 最终得到一个具备连通性的均衡分配结果。

### 子区域路径规划方法
基于时间窗口的多机器人全覆盖路径规划方案的思路如下：

首先，需要建立基于DARP算法的机器人全覆盖路径规划模型，主要包括DARP的区域划分和子区域的STC路径生成。

在初始时刻，根据多机器人系统状态及区域覆盖情况进行多机器人协同覆盖路径规划。

然后，从路径规划结果中取一段时间窗口的路径作为控制输入，使机器人执行。

在机器人执行一段时间后，对其当前状态进行采样，并更新当前的的区域覆盖情况，根据当前的覆盖要求及机器人状态对下一时间窗口的覆盖任务做出规划。

重复步骤4，直至完成全覆盖任务。

需要注意的是，由于机器人在执行路径规划前只取规划结果的前一段作为控制输入，可能会导致路径规划的局部最优解不一定是全局最优解，因此需要设计有效的优化算法和控制策略来提高全覆盖任务的效率和准确性。